// SYX MIXINS â DIRECTIONAL (shared)
// ================================================
// Private helpers for null-skipping shorthand properties.
// Used by: _margin.scss, _padding.scss
// Philosophy: Bourbon-compatible API â pass `null` to skip a side.
// ================================================
@use 'sass:list';

// PRIVATE: Transforms shorthand to its shortest possible form.
// @example _syx-compact(10px 20px 10px 20px) â 10px 20px
@function _syx-compact($values) {
  $a: list.nth($values, 1);

  $b: $a;
  @if list.length($values) >= 2 { $b: list.nth($values, 2); }

  $c: $a;
  @if list.length($values) >= 3 { $c: list.nth($values, 3); }

  $d: $a;
  @if list.length($values) >= 4 {
    $d: list.nth($values, 4);
  } @else if list.length($values) >= 2 {
    $d: list.nth($values, 2);
  }

  @if $a == $b and $a == $c and $a == $d { @return $a; }
  @else if $a == $c and $b == $d         { @return $a $b; }
  @else if $b == $d                      { @return $a $b $c; }
  @else                                  { @return $a $b $c $d; }
}

// PRIVATE: Returns true if any item in $list is falsy (null/false).
@function _syx-has-null($list) {
  @each $item in $list {
    @if not $item { @return true; }
  }
  @return false;
}

// PRIVATE: Builds directional properties from CSS shorthand, skipping null sides.
// @param {string} $property  â e.g. 'margin', 'padding'
// @param {string} $suffix    â e.g. null, 'width'
// @param {list}   $values    â shorthand list, nulls skip that side
@mixin syx-directional($property, $suffix, $values) {
  $suffix-str: '';
  @if $suffix { $suffix-str: '-#{$suffix}'; }

  $top:    $property + '-top'    + $suffix-str;
  $bottom: $property + '-bottom' + $suffix-str;
  $left:   $property + '-left'   + $suffix-str;
  $right:  $property + '-right'  + $suffix-str;
  $all:    $property             + $suffix-str;

  $values: _syx-compact($values);

  @if _syx-has-null($values) {
    // Null-skipping mode â emit only non-null sides
    @if list.nth($values, 1) { #{$top}: list.nth($values, 1); }

    @if list.length($values) == 1 {
      @if list.nth($values, 1) { #{$right}: list.nth($values, 1); }
    } @else {
      @if list.nth($values, 2) { #{$right}: list.nth($values, 2); }
    }

    @if list.length($values) == 2 {
      @if list.nth($values, 1) { #{$bottom}: list.nth($values, 1); }
      @if list.nth($values, 2) { #{$left}: list.nth($values, 2); }
    } @else if list.length($values) == 3 {
      @if list.nth($values, 3) { #{$bottom}: list.nth($values, 3); }
      @if list.nth($values, 2) { #{$left}: list.nth($values, 2); }
    } @else if list.length($values) == 4 {
      @if list.nth($values, 3) { #{$bottom}: list.nth($values, 3); }
      @if list.nth($values, 4) { #{$left}: list.nth($values, 4); }
    }
  } @else {
    // No nulls â emit compact shorthand
    #{$all}: $values;
  }
}
