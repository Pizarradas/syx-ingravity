// SYX MIXINS â HELPERS
// ================================================
// Modern utility mixins that complement the SYX mixin library.
// These cover common patterns that previously required Bourbon
// or verbose inline CSS.
// ================================================

// MIXIN: transition($props...)
// Shorthand for transition with automatic prefers-reduced-motion guard.
// @example
//   @include transition(opacity 0.2s ease, transform 0.3s ease);
//   // â transition: opacity 0.2s ease, transform 0.3s ease;
//   //   @media (prefers-reduced-motion: reduce) { transition: none; }
@mixin transition($props...) {
  transition: $props;

  @media (prefers-reduced-motion: reduce) {
    transition: none;
  }
}

// MIXIN: truncate($max-width)
// Single-line text truncation with ellipsis.
// @example
//   @include truncate(200px);
//   // â max-width: 200px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis;
@mixin truncate($max-width: 100%) {
  max-width: $max-width;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

// MIXIN: sr-only()
// Visually hides an element while keeping it accessible to screen readers.
// Replaces the older hide-visually() mixin with the modern WCAG-recommended approach.
// @example
//   .skip-link { @include sr-only(); }
@mixin sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// MIXIN: sr-only-reset()
// Reverses sr-only() â makes a previously hidden element visible again.
@mixin sr-only-reset {
  position: static;
  width: auto;
  height: auto;
  padding: 0;
  margin: 0;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

// MIXIN: focus-ring($color, $offset)
// Accessible focus outline using outline (not box-shadow, which is clipped).
// @example
//   a:focus-visible { @include focus-ring(); }
@mixin focus-ring($color: var(--semantic-color-state-focus), $offset: 3px) {
  outline: 2px solid $color;
  outline-offset: $offset;
}

// MIXIN: flex-center()
// Centers children both horizontally and vertically with flexbox.
// @example
//   .icon-wrapper { @include flex-center(); }
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

// MIXIN: flex-between()
// Space-between row layout â common for navbars, card headers, etc.
@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

// MIXIN: aspect-ratio($width, $height)
// Native aspect-ratio with a padding-top fallback for older browsers.
// @example
//   .video-embed { @include aspect-ratio(16, 9); }
@mixin aspect-ratio($width, $height) {
  aspect-ratio: #{$width} / #{$height};

  // Fallback for browsers without aspect-ratio support
  @supports not (aspect-ratio: 1) {
    &::before {
      content: '';
      display: block;
      padding-top: percentage(calc($height / $width));
    }
  }
}

// MIXIN: clearfix()
// Modern clearfix using display: flow-root (no pseudo-element needed).
// Falls back to the classic ::after method for older browsers.
@mixin clearfix {
  display: flow-root;

  @supports not (display: flow-root) {
    &::after {
      content: '';
      display: table;
      clear: both;
    }
  }
}

// MIXIN: ellipsis($lines)
// Multi-line text truncation with ellipsis.
// @example
//   @include ellipsis(3); // clamps to 3 lines
@mixin ellipsis($lines: 1) {
  @if $lines == 1 {
    @include truncate();
  } @else {
    display: -webkit-box;
    -webkit-line-clamp: $lines;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

// MIXIN: flex($dir, $just, $align, $wrap, $gap)
// Generic flexbox wrapper to avoid raw CSS.
// @example
//   @include flex(column, center, center, null, 1rem);
@mixin flex($dir: null, $just: null, $align: null, $wrap: null, $gap: null) {
  display: flex;
  @if $dir   != null { flex-direction: $dir; }
  @if $just  != null { justify-content: $just; }
  @if $align != null { align-items: $align; }
  @if $wrap  != null { flex-wrap: $wrap; }
  @if $gap   != null { gap: $gap; }
}

// MIXIN: text($size, $weight, $lh, $color)
// Typography shorthand to avoid repetitive font properties.
// @example
//   @include text(1.2rem, 700, 1.5, var(--color-primary));
@mixin text($size: null, $weight: null, $lh: null, $color: null) {
  @if $size   != null { font-size: $size; }
  @if $weight != null { font-weight: $weight; }
  @if $lh     != null { line-height: $lh; }
  @if $color  != null { color: $color; }
}

// MIXIN: absolute-center
// Perfectly centers an element within its relative parent.
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// MIXIN: flex-column
// Shorthand for vertical flex layouts.
@mixin flex-column {
  display: flex;
  flex-direction: column;
}

// MIXIN: cover
// Absolute overlay filling the entire parent.
@mixin cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

// MIXIN: gap($dim)
// Shorthand for gap property.
@mixin gap($dim) {
  gap: $dim;
}
