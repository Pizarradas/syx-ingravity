// CORE
// ===============================================
@use "../abstracts/index" as *;
// ===============================================

// ORGANISMS: landing-brand
// ===============================================
// All .org-landing-* organisms used in the VELOX
// and TERRA marketing landing pages.
//
// BEM naming — layer prefix: org-landing-*
// All values via --component-landing-* tokens.
// ===============================================

@mixin org-landing($theme: null) {
  @layer syx.organisms {

    // ─────────────────────────────────────────────
    // ORGANISM: org-landing-navbar
    // ─────────────────────────────────────────────
    .org-landing-navbar {
        @include sticky($top: 0);
        z-index: var(--component-header-z-index, 100);
        background-color: var(--component-landing-navbar-bg);
        @include border(bottom, 1px, solid, var(--component-landing-navbar-border));
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);

        &__bar {
            @include flex-between;
            @include padding(var(--semantic-space-component-sm) var(--semantic-space-layout-md));
            max-width: var(--component-landing-container-max);
            @include margin(null auto);
            min-height: var(--component-header-height, 3.5rem);
        }

        &__logo {
            font-size: var(--primitive-fluid-font-h4, 1.25rem);
            font-weight: 800;
            font-family: var(--semantic-font-family-primary-bold, var(--semantic-font-family-primary));
            color: var(--semantic-color-primary);
            letter-spacing: -0.03em;
            text-decoration: none;
            flex-shrink: 0;
            @include transition(opacity 0.2s ease);

            &:hover {
                opacity: 0.8;
            }

            &:focus-visible {
                outline: 0.2rem solid var(--semantic-color-state-focus);
                @include border-radius(var(--semantic-border-radius-sm));
            }
        }

        &__links {
            list-style: none;
            @include margin(0);
            @include padding(0);
            display: none;

            li {
                list-style: none;
                display: inline-flex;
                align-items: center;
            }

            @include breakpoint(tablet) {
                @include flex(null, null, center, null, var(--semantic-space-inline-md, 1.5rem));
            }

            a {
                color: var(--semantic-color-text-secondary);
                text-decoration: none;
                font-size: var(--semantic-font-size-body);
                @include transition(color 0.2s ease);

                &:hover {
                    color: var(--semantic-color-primary);
                }

                &:focus-visible {
                    outline: 0.2rem solid var(--semantic-color-state-focus);
                    @include border-radius(var(--semantic-border-radius-sm));
                }
            }
        }

        &__cta {
            display: none;

            @include breakpoint(tablet) {
                display: block;
            }
        }

        &__toggle {
            @include flex(column, center, center, null, 5px);
            @include size(2.5rem);
            @include padding(0.4rem);
            background: transparent;
            @include border(all, 0);
            @include border-radius(var(--semantic-border-radius-sm));
            cursor: pointer;
            flex-shrink: 0;
            @include transition(background-color 0.2s ease);

            @include breakpoint(tablet) {
                display: none;
            }

            span {
                display: block;
                @include size(1.25rem, 2px);
                background-color: var(--semantic-color-text-primary);
                @include border-radius(2px);
                @include transition(transform 0.3s ease, opacity 0.3s ease);
                transform-origin: center;
            }

            &:hover {
                background-color: color-mix(in srgb, var(--semantic-color-text-primary) 8%, transparent);
            }
        }

        &__mobile-menu {
            display: none;
            background-color: var(--component-landing-navbar-bg);
            @include padding(var(--semantic-space-inset-md) var(--semantic-space-layout-md));
            @include border(bottom, 1px, solid, var(--component-landing-navbar-border));

            &.is-open {
                display: block;
            }
        }

        &__mobile-nav {
            @include flex(column, null, null, null, var(--semantic-space-inline-sm));
        }

        &__mobile-link {
            @include padding(var(--semantic-space-component-sm) 0);
            display: block;
            color: var(--semantic-color-text-secondary);
            text-decoration: none;
            font-size: var(--semantic-font-size-body);
            @include border(bottom, 1px, solid, var(--semantic-color-border-subtle));
            @include transition(color 0.2s ease);

            &:hover {
                color: var(--semantic-color-primary);
            }

            &--cta {
                color: var(--semantic-color-primary);
                font-weight: var(--semantic-font-weight-bold);
                border-bottom: none;
            }
        }
    }


    // ─────────────────────────────────────────────
    // ORGANISM: org-landing-hero
    // ─────────────────────────────────────────────
    .org-landing-hero {
        background-color: var(--component-landing-hero-bg);
        @include relative();
        overflow: hidden;
        min-height: var(--component-landing-hero-min-height, 88svh);
        display: grid;
        place-items: center;

        &::before {
            content: '';
            @include absolute($top: 50%, $left: 50%);
            transform: translate(-50%, -50%);
            width: clamp(30rem, 70vw, 60rem);
            height: clamp(20rem, 50vw, 40rem);
            background: radial-gradient(ellipse at center,
                    color-mix(in srgb, var(--semantic-color-primary) 18%, transparent) 0%,
                    color-mix(in srgb, var(--semantic-color-primary) 6%, transparent) 40%,
                    transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        &::after {
            content: '';
            @include absolute($top: -5%, $right: -10%);
            width: clamp(20rem, 40vw, 35rem);
            height: clamp(20rem, 40vw, 35rem);
            background: radial-gradient(ellipse at center,
                    color-mix(in srgb, var(--semantic-color-primary) 10%, transparent) 0%,
                    transparent 65%);
            pointer-events: none;
            z-index: 0;
        }

        // Compound selector (0-2-0) beats .layout-grid (0-1-0) without !important
        & .org-landing-hero__inner {
            @include relative();
            z-index: 1;
            grid-template-columns: 1fr;
            grid-auto-flow: row;
            row-gap: clamp(2.5rem, 5vw, 4rem);
            justify-items: center;
            @include padding(var(--component-landing-hero-padding-y) var(--component-landing-section-padding-x));
            max-width: var(--component-landing-container-max);
            @include margin(null auto);
            width: 100%;
            text-align: center;

            // .layout-grid__col-xs-12 
            .layout-grid__col-xs-12 {
                display: grid;
                gap: 2rem;
            }
        }

        &__pill {
            display: inline-flex;
            align-items: center;
            gap: var(--semantic-space-inline-sm);
            @include padding(0.45rem var(--semantic-space-component-sm));
            background-color: var(--component-landing-hero-pill-bg);
            color: var(--component-landing-hero-pill-color);
            font-size: var(--semantic-font-size-body-sm, 0.875rem);
            font-weight: var(--semantic-font-weight-medium);
            @include border-radius(var(--semantic-border-radius-pill, 999px));
            @include border(all, 1px, solid, color-mix(in srgb, var(--semantic-color-primary) 30%, transparent));
            @include margin(null auto);
        }

        &__title {
            font-size: var(--component-landing-hero-heading-size);
            font-family: var(--semantic-font-family-heading, var(--semantic-font-family-primary));
            font-weight: var(--semantic-font-weight-bold);
            color: var(--semantic-color-text-primary);
            line-height: var(--semantic-line-height-tight);
            letter-spacing: -0.03em;
            text-align: center;
            @include margin(0 auto);
            max-width: 56rem;
        }

        &__accent {
            color: var(--component-landing-hero-accent-color);
        }

        &__lead {
            font-size: var(--component-landing-hero-lead-size);
            color: var(--semantic-color-text-secondary);
            line-height: var(--semantic-line-height-normal);
            max-width: 44rem;
            text-align: center;
            @include margin(0 auto);
        }

        &__actions {
            @include flex(null, center, center, null, var(--semantic-space-inline-md));
            flex-wrap: wrap;
        }

        &__btn-ghost {
            background: transparent;
            @include border(all, 1px, solid, var(--semantic-color-border-subtle));
            color: var(--semantic-color-text-secondary);
            @include transition(border-color 0.2s ease, color 0.2s ease);

            &:hover {
                border-color: var(--semantic-color-primary);
                color: var(--semantic-color-primary);
            }
        }

        &__social {
            @include flex(null, center, center, null, var(--semantic-space-inline-sm));
            font-size: var(--semantic-font-size-body-sm, 0.875rem);
            color: var(--semantic-color-text-secondary);
            flex-wrap: wrap;
        }

        &__avatars {
            @include flex(null, center, null, null, -0.5rem);

            span {
                @include size(2rem);
                @include flex-center;
                @include border-radius(50%);
                background-color: var(--component-landing-hero-avatar-bg);
                color: var(--component-landing-hero-avatar-color);
                font-size: 0.7rem;
                font-weight: var(--semantic-font-weight-bold);
                @include border(all, 2px, solid, var(--semantic-color-bg-primary));
            }
        }

        &__stars {
            color: var(--component-landing-stats-number-color);
        }
    }


    // ─────────────────────────────────────────────
    // ORGANISM: org-landing-stats
    // ─────────────────────────────────────────────
    .org-landing-stats {
        background-color: var(--component-landing-stats-bg);
        @include border(vertical, 1px, solid, var(--component-landing-stats-border));
        @include padding(var(--semantic-space-layout-lg) var(--component-landing-section-padding-x));

        &__grid {
            // Compound selector used elsewhere; here a direct grid override is safe
            // since this element is not also a .layout-grid in the HTML
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--semantic-space-layout-md);
            max-width: var(--component-landing-container-max);
            @include margin(null auto);
            text-align: center;

            @include breakpoint(tablet) {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        &__item {
            @include relative();

            @include breakpoint(tablet) {
                &:not(:last-child)::after {
                    content: '';
                    @include absolute($top: 10%, $right: 0);
                    height: 80%;
                    width: 1px;
                    background-color: var(--semantic-color-border-subtle);
                }
            }
        }

        &__number {
            display: block;
            font-size: var(--component-landing-stats-number-size);
            font-weight: var(--semantic-font-weight-bold);
            font-family: var(--semantic-font-family-heading, var(--semantic-font-family-primary));
            color: var(--component-landing-stats-number-color);
            line-height: 1.1;
            @include margin(0 0 var(--semantic-space-inline-xs) 0);
        }

        &__label {
            display: block;
            font-size: var(--semantic-font-size-body-sm, 0.875rem);
            color: var(--component-landing-stats-label-color);
            text-transform: uppercase;
            letter-spacing: 0.07em;
        }
    }


    // ─────────────────────────────────────────────
    // ORGANISM: org-landing-section-head (shared)
    // ─────────────────────────────────────────────
    .org-landing-section-head {
        text-align: center;
        @include margin(null auto var(--semantic-space-layout-lg) auto);
        max-width: 48rem;
    }

    .org-landing-section-tag {
        display: inline-block;
        @include padding(0.4rem var(--semantic-space-component-md, 1rem));
        background-color: var(--component-landing-section-tag-bg);
        color: var(--component-landing-section-tag-color);
        font-size: max(0.8rem, var(--semantic-font-size-body-sm, 0.8rem));
        font-weight: var(--semantic-font-weight-bold);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        @include border-radius(var(--component-landing-section-tag-radius));
        @include margin(null null var(--semantic-space-inline-md) null);
    }

    .org-landing-section-title {
        font-size: var(--component-landing-section-title-size);
        font-family: var(--semantic-font-family-heading, var(--semantic-font-family-primary));
        font-weight: var(--semantic-font-weight-bold);
        color: var(--semantic-color-text-primary);
        line-height: var(--semantic-line-height-tight);
        letter-spacing: -0.02em;
        @include margin(0 0 var(--semantic-space-inline-md) 0);
    }

    .org-landing-section-lead {
        font-size: var(--semantic-font-size-body-lg, 1.125rem);
        color: var(--semantic-color-text-secondary);
        line-height: var(--semantic-line-height-normal);
        max-width: 40rem;
        @include margin(0 auto);
    }


    // ─────────────────────────────────────────────
    // ORGANISM: org-landing-features
    // ─────────────────────────────────────────────
    .org-landing-features {
        @include padding(var(--component-landing-section-padding-y) var(--component-landing-section-padding-x));

        &__inner {
            max-width: var(--component-landing-container-max);
            @include margin(null auto);
        }

        &__grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--semantic-space-layout-lg);

            @include breakpoint(tablet) {
                grid-template-columns: repeat(2, 1fr);
            }

            @include min-screen(1024px) {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    }


    // ─────────────────────────────────────────────
    // ORGANISM: org-landing-pricing
    // ─────────────────────────────────────────────
    .org-landing-pricing {
        @include padding(var(--component-landing-section-padding-y) var(--component-landing-section-padding-x));
        background-color: var(--semantic-color-bg-secondary);

        &__inner {
            max-width: var(--component-landing-container-max);
            @include margin(null auto);
        }

        &__grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--semantic-space-layout-md);
            align-items: start;

            @include breakpoint(tablet) {
                grid-template-columns: repeat(3, 1fr);
                align-items: stretch;
            }
        }
    }


    // ─────────────────────────────────────────────
    // ORGANISM: org-landing-testimonials
    // ─────────────────────────────────────────────
    .org-landing-testimonials {
        @include padding(var(--component-landing-section-padding-y) var(--component-landing-section-padding-x));

        &__inner {
            max-width: var(--component-landing-container-max);
            @include margin(null auto);
        }

        &__grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--semantic-space-layout-md);
            align-items: stretch;

            @include breakpoint(tablet) {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    }


    // ─────────────────────────────────────────────
    // ORGANISM: org-landing-cta
    // ─────────────────────────────────────────────
    .org-landing-cta {
        @include relative();
        @include padding(var(--component-landing-cta-padding-y) var(--component-landing-section-padding-x));
        overflow: hidden;

        &::before {
            content: '';
            @include absolute($top: 0, $left: 0);
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg,
                    color-mix(in srgb, #fff 8%, transparent) 0%,
                    transparent 50%,
                    color-mix(in srgb, #000 8%, transparent) 100%);
            pointer-events: none;
        }

        &__inner {
            @include relative();
            max-width: var(--component-landing-container-max);
            @include margin(null auto);
            text-align: center;
        }

        &__title {
            font-size: var(--component-landing-section-title-size);
            font-family: var(--semantic-font-family-heading, var(--semantic-font-family-primary));
            font-weight: var(--semantic-font-weight-bold);
            color: var(--component-landing-cta-color);
            @include margin(0 0 var(--semantic-space-inline-md) 0);
        }

        &__lead {
            font-size: var(--semantic-font-size-body-lg, 1.125rem);
            color: color-mix(in srgb, var(--component-landing-cta-color) 80%, transparent);
            @include margin(0 0 var(--semantic-space-layout-md) 0);
        }

        &__actions {
            @include flex(null, center, center, null, var(--semantic-space-inline-md));
            flex-wrap: wrap;

            .atom-btn {
                width: auto;
            }
        }

        &__btn-inverse {
            background-color: var(--component-landing-cta-btn-inverse-bg);
            color: var(--component-landing-cta-btn-inverse-color);
            @include border(all, 2px, solid, var(--component-landing-cta-btn-inverse-bg));
            @include transition(background-color 0.2s ease);

            &:hover {
                background-color: var(--component-landing-cta-btn-inverse-hover-bg);
            }
        }

        &__sub {
            @include margin(var(--semantic-space-inline-md) null null null);
            font-size: var(--semantic-font-size-body-sm, 0.875rem);
            color: color-mix(in srgb, var(--component-landing-cta-color) 65%, transparent);
        }
    }


    // ─────────────────────────────────────────────
    // ORGANISM: org-landing-footer
    // ─────────────────────────────────────────────
    .org-landing-footer {
        background-color: var(--component-landing-footer-bg);
        @include border(top, 1px, solid, var(--component-landing-footer-border));
        @include padding(var(--component-landing-footer-padding-y) var(--component-landing-section-padding-x));

        &__inner {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--semantic-space-layout-md);
            max-width: var(--component-landing-container-max);
            @include margin(null auto null auto);

            @include breakpoint(tablet) {
                grid-template-columns: 2fr 1fr 1fr 1fr;
                gap: var(--component-landing-footer-col-gap);
            }
        }

        &__brand {
            @include border(bottom, 1px, solid, var(--component-landing-footer-border));
            @include padding(null null var(--semantic-space-layout-sm) null);

            @include breakpoint(tablet) {
                border-bottom: none;
                padding-bottom: 0;
            }
        }

        &__brand-name {
            font-size: var(--primitive-fluid-font-h4, 1.25rem);
            font-weight: 800;
            color: var(--semantic-color-primary);
            letter-spacing: -0.03em;
            @include margin(null null var(--semantic-space-inline-sm) null);
        }

        &__tagline {
            font-size: var(--semantic-font-size-body-sm, 0.875rem);
            color: var(--component-landing-footer-link-color);
            line-height: var(--semantic-line-height-normal);
            @include margin(0);
        }

        &__col-title {
            font-size: var(--semantic-font-size-body-sm, 0.875rem);
            font-weight: var(--semantic-font-weight-bold);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--semantic-color-text-primary);
            @include margin(0 0 var(--semantic-space-inline-md) 0);
        }

        &__links {
            list-style: none;
            @include margin(0);
            @include padding(0);
            @include flex(column, null, null, null, var(--semantic-space-inline-md));

            a {
                font-size: var(--semantic-font-size-body-sm, 0.875rem);
                color: var(--component-landing-footer-link-color);
                text-decoration: none;
                @include transition(color 0.2s ease);

                &:hover {
                    color: var(--component-landing-footer-link-hover);
                }

                &:focus-visible {
                    outline: 0.2rem solid var(--semantic-color-state-focus);
                    @include border-radius(var(--semantic-border-radius-sm));
                }
            }
        }

        &__copy {
            @include padding(var(--semantic-space-layout-sm) null null null);
            @include border(top, 1px, solid, var(--component-landing-footer-border));
            font-size: var(--semantic-font-size-body-sm, 0.875rem);
            color: var(--component-landing-footer-link-color);
            max-width: var(--component-landing-container-max);
            @include margin(var(--semantic-space-layout-md) auto null auto);
        }
    }



    // ─────────────────────────────────────────────
    // ORGANISM: org-landing-how
    // Three-step "How it works" section
    // ─────────────────────────────────────────────
    .org-landing-how {
        background: var(--semantic-color-bg-primary);
        padding: var(--component-landing-section-padding-y, var(--semantic-space-layout-xl)) 0;

        &__grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--semantic-space-component-md);
            max-width: 960px;
            margin-inline: auto;
            padding: 0 var(--component-landing-section-padding-x, var(--semantic-space-layout-md));

            @include breakpoint(tablet) {
                grid-template-columns: repeat(3, 1fr);
                gap: var(--semantic-space-layout-md);
                align-items: stretch;
            }
        }

        &__step {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            @include padding(var(--semantic-space-layout-md));
            @include border(all, 1px, solid, var(--semantic-color-border-subtle));
            @include border-radius(var(--semantic-border-radius-lg));
            background: var(--semantic-color-bg-secondary);
            box-sizing: border-box;
            gap: var(--semantic-space-component-xs);
            @include transition(border-color 0.2s ease, box-shadow 0.2s ease);

            &:hover {
                border-color: var(--semantic-color-primary);
                box-shadow: 0 4px 24px -4px color-mix(in srgb, var(--semantic-color-primary) 15%, transparent);
            }
        }

        &__badge {
            width: 52px;
            height: 52px;
            @include border-radius(50%);
            background: linear-gradient(135deg, var(--semantic-color-primary), var(--semantic-color-secondary, var(--semantic-color-primary)));
            color: #fff;
            @include flex-center();
            flex-shrink: 0;
            margin-bottom: var(--semantic-space-component-xs);
            box-shadow: 0 8px 24px -4px color-mix(in srgb, var(--semantic-color-primary) 30%, transparent);

            svg {
                width: 20px;
                height: 20px;
            }
        }

        &__step-num {
            font-family: var(--semantic-font-family-heading, var(--semantic-font-family-primary));
            font-weight: var(--semantic-font-weight-bold);
            font-size: 0.68rem;
            letter-spacing: 0.1em;
            color: var(--semantic-color-text-tertiary);
            text-transform: uppercase;
        }

        &__label {
            font-family: var(--semantic-font-family-heading, var(--semantic-font-family-primary));
            font-weight: var(--semantic-font-weight-bold);
            font-size: var(--semantic-font-size-h5, 1.1rem);
            color: var(--semantic-color-text-primary);
            margin-top: var(--semantic-space-component-xs);
            margin-bottom: var(--semantic-space-component-xs);
        }

        &__desc {
            font-size: var(--semantic-font-size-body-small, 0.875rem);
            color: var(--semantic-color-text-secondary);
            line-height: 1.65;
            flex: 1;
        }

        &__example {
            display: inline-block;
            margin-top: var(--semantic-space-component-sm);
            @include padding(0.2em 0.6em);
            background: var(--semantic-color-bg-tertiary);
            @include border(all, 1px, solid, var(--semantic-color-border-subtle));
            @include border-radius(var(--semantic-border-radius-sm));
            font-family: var(--semantic-font-family-mono);
            font-size: 0.68rem;
            color: var(--semantic-color-primary);
            word-break: break-all;
        }

        &__arrow {
            display: none;
        }
    }

  } // end @layer syx.organisms
}
