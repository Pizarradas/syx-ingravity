// CORE
// ===============================================
@use "../abstracts/index" as *;
// ===============================================

// atom: btn
// ===============================================
@mixin atom-btn($theme: null) {
  @layer syx.atoms {
  .atom-btn {
    @include border(all, var(--component-button-border-width), solid, null);
    overflow-wrap: break-word;
    display: inline-flex;
    align-items: center;
    justify-content: center;

    // Reset <a> text-decoration for all interactive states â single source of truth
    &,
    &:hover,
    &:focus,
    &:visited,
    &:active {
      text-decoration: none;
    }

    user-select: none;
    text-align: center;
    box-shadow: none;
    cursor: pointer;
    font-family: var(--component-button-font-family);
    font-size: var(--component-button-font-size);
    line-height: var(--component-button-line-height);
    @include transition(border-color 0.25s ease-out,
      color 0.25s ease-out,
      background-color 0.25s ease-out,
      transform 0.1s ease);

    &:active {
      transform: translateY(1px);
    }

    // &--primary
    &--primary {
      border-color: var(--component-button-primary-color);

      // Filled variant
      &.atom-btn--filled {
        background-color: var(--component-button-primary-filled-bg);
        color: var(--component-button-primary-filled-color, white);
      }

      // Outline variant (no --filled class)
      &:not(.atom-btn--filled) {
        background-color: transparent;
        color: var(--component-button-primary-color);
      }
    }

    // &--secondary
    &--secondary {
      border-color: var(--component-button-secondary-color);

      // Filled variant
      &.atom-btn--filled {
        background-color: var(--component-button-secondary-filled-bg);
        color: var(--component-button-secondary-filled-color, white);
      }

      // Outline variant (no --filled class)
      &:not(.atom-btn--filled) {
        background-color: transparent;
        color: var(--component-button-secondary-color);
      }
    }

    // &--tertiary
    &--tertiary {
      border-color: var(--component-button-tertiary-color);

      // Filled variant
      &.atom-btn--filled {
        background-color: var(--component-button-tertiary-filled-bg);
        color: var(--component-button-tertiary-filled-color, white);
      }

      // Outline variant (no --filled class)
      &:not(.atom-btn--filled) {
        background-color: transparent;
        color: var(--component-button-tertiary-color);
      }
    }

    // &--quaternary
    &--quaternary {
      border-color: var(--component-button-quaternary-color);

      // Filled variant
      &.atom-btn--filled {
        background-color: var(--component-button-quaternary-filled-bg);
        color: var(--component-button-quaternary-filled-color, white);
      }

      // Outline variant (no --filled class)
      &:not(.atom-btn--filled) {
        background-color: transparent;
        color: var(--component-button-quaternary-color);
      }
    }

    // &--size
    &--size {

      // &-sm
      &-sm {
        @include padding(var(--component-button-size-sm-y, 0.5rem) var(--component-button-size-sm-x, 1.125rem));
        font-size: var(--component-button-font-size-sm);
        line-height: var(--semantic-line-height-snug);
      }

      // &-md
      &-md {
        @include padding(var(--component-button-size-md-y, 0.75rem) var(--component-button-size-md-x, 1.5rem));
        font-size: var(--component-button-font-size-md);
        line-height: var(--semantic-line-height-snug);
      }

      // &-lg
      &-lg {
        @include padding(var(--component-button-size-lg-y, 0.9rem) var(--component-button-size-lg-x, 2rem));
        font-size: var(--component-button-font-size-lg);
        line-height: var(--semantic-line-height-snug);
      }
    }

    // &:hover
    &:hover {

      // &:not(:disabled)
      &:not(:disabled) {
        cursor: pointer;

        // Primary variant hover
        &.atom-btn--primary {
          border-color: var(--component-button-primary-border-hover);
          background-color: var(--component-button-primary-bg-hover);
          color: var(--component-button-primary-color-hover);

          // Filled: bg darkens, text stays white
          &.atom-btn--filled {
            background-color: var(--component-button-primary-filled-bg-hover);
            border-color: var(--component-button-primary-filled-border-hover);
            color: var(--component-button-primary-filled-color-hover);
          }
        }

        // Secondary variant hover
        &.atom-btn--secondary {
          border-color: var(--component-button-secondary-border-hover);
          background-color: var(--component-button-secondary-bg-hover);
          color: var(--component-button-secondary-color-hover);

          &.atom-btn--filled {
            background-color: var(--component-button-secondary-filled-bg-hover);
            border-color: var(--component-button-secondary-filled-border-hover);
            color: var(--component-button-secondary-filled-color-hover);
          }
        }

        // Tertiary variant hover
        &.atom-btn--tertiary {
          border-color: var(--component-button-tertiary-border-hover);
          background-color: var(--component-button-tertiary-bg-hover);
          color: var(--component-button-tertiary-color-hover);

          &.atom-btn--filled {
            background-color: var(--component-button-tertiary-filled-bg-hover);
            border-color: var(--component-button-tertiary-filled-border-hover);
            color: var(--component-button-tertiary-filled-color-hover);
          }
        }

        // Quaternary variant hover
        &.atom-btn--quaternary {
          border-color: var(--component-button-quaternary-border-hover);
          background-color: var(--component-button-quaternary-bg-hover);
          color: var(--component-button-quaternary-color-hover);

          &.atom-btn--filled {
            background-color: var(--component-button-quaternary-filled-bg-hover);
            border-color: var(--component-button-quaternary-filled-border-hover);
            color: var(--component-button-quaternary-filled-color-hover);
          }
        }
      }
    }

    // &:focus
    &:focus {

      // &:not(:disabled)
      &:not(:disabled) {
        outline: 0;
      }
    }

    // &:focus-visible
    &:focus-visible {

      // &:not(:disabled)
      &:not(:disabled) {
        outline: 0.2rem solid var(--semantic-color-state-focus);
      }
    }

    // &:disabled
    &:disabled {
      cursor: not-allowed;
      border-color: var(--semantic-color-state-disabled);
    }

    // Circle variant
    &.atom-btn--circle {
      @include border-radius(50%);
    }

    // Filled disabled state
    &.atom-btn--filled {
      &:disabled {
        background-color: var(--semantic-color-state-disabled);
      }
    }

    // Default border-radius for non-circle buttons
    &:not(.atom-btn--circle) {
      @include border-radius(var(--component-button-border-radius));
    }

    // Text + icon button: give flex gap between text and icon
    &:has(.atom-icon) {
      gap: var(--component-button-icon-gap, 0.5rem);
    }


    // &:where()
    &:where([class*="--scope-1"]):has(.atom-icon:first-child:last-child) {
      @include padding(null null null calc(var(--component-button-size-sm) * 2));
    }

    &:where([class*="--scope-2"]):has(.atom-icon:first-child:last-child) {
      @include padding(null null null calc(var(--component-button-size-md) * 2.5));
    }

    &:where([class*="--scope-3"]):has(.atom-icon:first-child:last-child) {
      @include padding(null null null calc(var(--component-button-size-lg) * 3.5));
    }

    // &--has
    &--has {

      // &-icon
      &-icon {
        @include position(relative);

        // .atom
        .atom {

          // &-icon
          &-icon {
            @include position(absolute, 0, null, 0, 0);
            @include margin(auto null auto null);
          }
        }

        // &-scope
        &-scope {

          // &-1
          &-1 {
            @include padding(null null null calc(2 * var(--component-button-size-sm)));

            // .atom
            .atom {

              // &-icon
              &-icon {
                @include margin(null null null calc(var(--component-button-size-sm) / 2));
                @include size(var(--component-button-size-sm));
              }
            }
          }

          // &-2
          &-2 {
            @include padding(null null null calc(2 * var(--component-button-size-md)));

            // .atom
            .atom {

              // &-icon
              &-icon {
                @include margin(null null null calc(var(--component-button-size-md) / 2));
                @include size(var(--component-button-size-md));
              }
            }
          }

          // &-3
          &-3 {
            @include padding(null null null calc(2 * var(--component-button-size-lg)));

            // .atom
            .atom {

              // &-icon
              &-icon {
                @include margin(null null null calc(var(--component-button-size-lg) / 2));
                @include size(var(--component-button-size-lg));
              }
            }
          }
        }
      }
    }
  }
  } // end @layer syx.atoms
}
