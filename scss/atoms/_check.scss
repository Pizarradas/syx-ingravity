// CORE
// ===============================================
@use "../abstracts/index" as *;
// ===============================================

// atom: check
// ===============================================
@mixin atom-check($theme: null) {
  @layer syx.atoms {
  .atom-check {
    display: inline-flex;
    align-items: flex-start;
    cursor: pointer;
    user-select: none;

    // &__input â hidden native checkbox
    &__input {
      @include absolute();
      opacity: 0;
      width: 0;
      height: 0;
      pointer-events: none;
    }

    // &__label â flex row: [box] [text]
    &__label {
      @include relative();
      display: inline-flex;
      align-items: center;
      gap: var(--component-check-gap);
      font-size: var(--component-form-field-font-size);
      color: var(--component-form-field-color);
      line-height: var(--component-form-field-line-height);
      cursor: pointer;

      // Custom checkbox box
      &::before {
        content: "";
        flex-shrink: 0;
        display: block;
        width: var(--component-check-size);
        height: var(--component-check-size);
        border: var(--component-check-border-width) solid var(--component-check-border-color);
        border-radius: var(--component-check-border-radius);
        background-color: var(--primitive-color-white);
        @include transition(border-color 0.15s ease,
          background-color 0.15s ease,
          box-shadow 0.15s ease);
      }

      // Checkmark â centered inside the box using inset + margin: auto
      &::after {
        content: "";
        @include absolute($top: 0, $right: calc(100% - var(--component-check-size)), $bottom: 0, $left: 0);
        margin: auto;
        width: 5px;
        height: 9px;
        border-right: 2px solid transparent;
        border-bottom: 2px solid transparent;
        transform: rotate(45deg) scale(0) translateY(-1px);
        transform-origin: center;
        @include transition(transform 0.15s cubic-bezier(0.16, 1, 0.3, 1),
          border-color 0.15s ease);
      }

      // Hover
      &:hover::before {
        border-color: var(--component-check-border-color-hover);
        box-shadow: var(--component-check-shadow-focus);
      }
    }

    // Checked state
    &__input:checked+&__label {
      &::before {
        background-color: var(--component-check-bg-checked);
        border-color: var(--component-check-bg-checked);
      }

      &::after {
        border-right-color: var(--primitive-color-white);
        border-bottom-color: var(--primitive-color-white);
        transform: rotate(45deg) scale(1) translateY(-1px);
      }
    }

    // &__icon — explicit custom checkbox box element
    // Alternative to ::before pseudo-element for icon-based implementations
    &__icon {
      flex-shrink: 0;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: var(--component-check-size);
      height: var(--component-check-size);
      border: var(--component-check-border-width) solid var(--component-check-border-color);
      border-radius: var(--component-check-border-radius);
      background-color: var(--primitive-color-white);
      @include transition(border-color 0.15s ease,
        background-color 0.15s ease,
        box-shadow 0.15s ease);

      svg {
        display: none;
      }
    }

    &__input:checked+&__label &__icon,
    &__input:checked~&__icon {
      background-color: var(--component-check-bg-checked);
      border-color: var(--component-check-bg-checked);

      svg {
        display: block;
        color: var(--primitive-color-white);
        width: 10px;
        height: 10px;
      }
    }

    // Focus visible
    &__input:focus-visible+&__label::before {
      outline: 0.2rem solid var(--component-form-field-border-focus);
      outline-offset: 2px;
    }

    // Disabled
    &__input:disabled+&__label {
      opacity: 0.5;
      cursor: not-allowed;

      &::before {
        background-color: var(--primitive-color-gray-100);
        border-color: var(--primitive-color-gray-200);
      }
    }
  }
  } // end @layer syx.atoms
}
